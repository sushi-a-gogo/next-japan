<div class="component-box">
  <div class="cb-content pad fade-in" [class.open]="loaded()">
    @if(user()) {
    <section class="left nx-flex col gap-20">
      <ul class="nx-flex col gap-20">
        <li class="nx-flex col gap-20">
          <header class="user nx-flex col gap-10">
            <app-user-avatar [user]="avatar()!" [size]="256" />
            <div class="title-text">
              {{ user()?.firstName }} {{ user()?.lastName }}
            </div>
          </header>
          <main class="nx-flex col gap-20">
            <div class="profile">
              @if(showProfileForm()) {
              <app-user-profile [user]="user()!" (close)="hideProfile()" />
              } @else {
              <button
                type="button"
                class="app-button app-button-filled"
                (click)="showProfileForm.set(true)"
              >
                Edit Profile
              </button>
              }
            </div>
          </main>
        </li>
        <li>
          <app-profile-badges
            [user]="user()!"
            [eventRegistrationCount]="nextEvent() ? 1 : 0"
          />
        </li>
      </ul>
    </section>
    <section class="nx-flex col gap-36">
      <section class="nx-flex col gap-10">
        <div class="title-text">Your Dashboard</div>
        <div class="banner nx-flex col gap-20">
          <!-- <div>
            This is your launch page for all things Next Japan.
            <p>
              Open
              <b>My Events</b> to view all of your registered events. To see the
              full list of upcoming events, visit the <b>Landing Page</b>, or
              get creative using our <b>AI Designer</b>!
            </p>
          </div> -->
          <div>
            Welcome to your personal launch pad for all things
            <b>Next Japan</b>! A place where you can check what's coming up next
            or set off on new adventures.
            <!-- From here, you'll see your closest
            upcoming event, along with quick access to your profile and account
            settings. -->
          </div>
          <div>
            Want to explore everything that's happening across Next Japan? Head
            over to the
            <b>Landing Page</b> for a full list of events.<br />
            Feeling adventurous? Use our <b>AI Event Designer</b> to dream up
            your own one-of-a-kind gathering.<br /><br />
            Dive into <b>My Events</b> to manage the experiences you've already
            joined.
          </div>
          <div class="buttons">
            <a routerLink="/home" class="app-button app-button-filled">
              Landing Page
            </a>
            <a routerLink="/ai/create" class="app-button app-button-filled">
              AI Designer
            </a>
            <a
              routerLink="/user/registrations"
              class="app-button app-button-filled"
            >
              My Events
            </a>
            <button
              class="app-button app-button-filled"
              (click)="openSurprise()"
            >
              Surprise Me!
            </button>
          </div>
        </div>
      </section>
      @if(loaded()) {
      <app-next-event
        [nextEventRegistration]="nextEventRegistration()"
        [nextEvent]="nextEvent()"
        [suggestedEvent]="suggestedEvent()"
      />
      }
    </section>
    }
  </div>
</div>
@if(showSurprise()) {
<app-modal (close)="closeSurprise()">
  <app-surprise (ready)="surpriseReady($event)" (dismiss)="closeSurprise()" />
</app-modal>
}
