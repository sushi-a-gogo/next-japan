<div class="card-title">Badges</div>
<div class="badges" #badgeContainer>
  @for(badge of earnedBadges(); track badge.icon) {
  <div
    class="badge-card nj-flex col align-center justify-center"
    [class]="badge.icon"
    [class.visible]="animationState() === 'in'"
    [style.--animation-delay]="$index * 100 + 'ms'"
    [matTooltip]="badge.tooltip"
    [matTooltipShowDelay]="200"
  >
    <span class="material-symbols-outlined">
      {{ badge.icon }}
    </span>
    {{ badge.name }}
  </div>
  }
</div>
<div>
  Badges are special achievements you can earn as you participate in activities
  and events with Next Japan. Each badge represents a unique milestoneâ€”such as
  attending your first event, volunteering, or reaching a participation goal.
  Collecting badges is a fun way to track your progress and celebrate your
  involvement in the community. Want some extra motivation? Challenge a friend
  to see who can unlock the next badge first! Explore the different badges
  available and set your sights on new goals as you continue your journey with
  us.
</div>
<div class="card-title">Rewards Points</div>
<div>
  You currently have <b>{{ rewardPoints }} rewards points</b>. Rewards points
  are earned automatically when you attend a registered event. These points can
  be collected and later redeemed for delicious food items or exclusive gifts at
  upcoming events! Participating in more events means more points and more
  opportunities to enjoy special perks. Keep an eye on your points balance here,
  and don't miss out on the chance to treat yourself at our future gatherings!
</div>
<b>Expiration Date</b>
<div>
  Each portion of rewards points have a different expiration date. Please note
  that all dates are in Japan Standard Time (UTC+0900).
</div>
<div>
  Points highlighted in yellow will expire soon (within 90 days). Points
  highlighted in gray have already expired.
</div>

<div class="responsive">
  <table
    mat-table
    [dataSource]="rewards()"
    class="mat-elevation-z8 fade-in"
    [class.open]="loaded()"
  >
    <!-- mobile column -->
    <ng-container matColumnDef="mobile">
      <th class="mobile" mat-header-cell *matHeaderCellDef>Rewards Points</th>
      <td
        class="mobile"
        mat-cell
        *matCellDef="let element"
        [class.highlight]="element.expiresSoon"
      >
        <div class="nj-flex col gap-2">
          <div>
            <b>Points</b> (Remaining/Earned):
            <b>{{ element.pointsRemaining }}/{{ element.pointsEarned }}</b>
          </div>
          <div><b>Expiration</b>: {{ element.expiration | date }}</div>
          <div><b>Description</b>: {{ element.description }}</div>
        </div>
      </td>
    </ng-container>
    <!-- pointsEarned Column -->
    <ng-container matColumnDef="pointsEarned">
      <th class="number" mat-header-cell *matHeaderCellDef>Points Earned</th>
      <td
        class="number"
        mat-cell
        *matCellDef="let element"
        [class.highlight]="element.expiresSoon"
      >
        {{ element.pointsEarned }}
      </td>
    </ng-container>

    <!-- pointsRemaining Column -->
    <ng-container matColumnDef="pointsRemaining">
      <th class="number" mat-header-cell *matHeaderCellDef>Points Remaining</th>
      <td
        class="number"
        mat-cell
        *matCellDef="let element"
        [class.highlight]="element.expiresSoon"
      >
        {{ element.pointsRemaining }}
      </td>
    </ng-container>

    <!-- dateOfIssue Column -->
    <ng-container matColumnDef="dateOfIssue">
      <th mat-header-cell *matHeaderCellDef>Issue Date</th>
      <td
        mat-cell
        *matCellDef="let element"
        [class.highlight]="element.expiresSoon"
      >
        {{ element.dateOfIssue | date }}
      </td>
    </ng-container>

    <!-- expiration Column -->
    <ng-container matColumnDef="expiration">
      <th mat-header-cell *matHeaderCellDef>Expiration</th>
      <td
        mat-cell
        *matCellDef="let element"
        [class.highlight]="element.expiresSoon"
      >
        {{ element.expiration | date }}
      </td>
    </ng-container>

    <!-- description Column -->
    <ng-container matColumnDef="description">
      <th class="desc" mat-header-cell *matHeaderCellDef>Description</th>
      <td
        mat-cell
        *matCellDef="let element"
        [class.highlight]="element.expiresSoon"
      >
        {{ element.description }}
      </td>
    </ng-container>

    <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
    <tr mat-row *matRowDef="let row; columns: displayedColumns"></tr>
  </table>
</div>
